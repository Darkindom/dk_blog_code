---
title: 计算机网络
date: 2018-07-19 18:32:42
tags:
- 计算机网络
categories:
- 计算机基础
description: 关于计算机网络的一些知识点汇总
---

# TCP和UDP协议区别
TCP:是面向连接的协议,在收发数据前，必须和对方建立可靠的连接,是可靠的字节流，TCP协议（传输控制协议）提供可靠的端到端的通信，可以保证接收方收到的数据与发送方发送的数据完全一致，能够保证数据不丢失、无差错，同时还有流量控制和拥塞控制的功能，用于传输大量数据，首部最少20字节，TCP的可靠性是通过顺序编号和确认（ACK）来实现的。
当对网络通讯质量有要求的时候，比如：整个数据要准确无误的传递给对方，这往往用于一些要求可靠的应用，比如HTTP、HTTPS、FTP等传输文件的协议，POP、SMTP等邮件传输的协议。
在日常生活中，常见使用TCP协议的应用如下：

* 浏览器，用的HTTP
* FlashFXP，用的FTP
* Outlook，用的POP、SMTP
* Putty，用的Telnet、SSH
* QQ文件传输

UDP:是无连接的协议，不需要建立连接，不可靠的，面向数据报的，没有重传和拥塞控制其开销远小于TCP协议，UDP协议不能保证数据不丢失、无差错，也不能保证接收方收到数据的顺序和发送方发送数据的顺序一样。UDP协议比较简单，适用于传输少量数据，首部开销小，只有8字节
当对网络通讯质量要求不高的时候，要求网络通讯速度能尽量的快，这时就可以使用UDP。
比如，日常生活中，常见使用UDP协议的应用如下：

* QQ语音
* QQ视频


## TCP协议的特点
（1）面向连接的
（2）提供可靠的数据传输服务
（3）提供流量控制。TCP能够控制进程发送数据的速率，保证另一端不被大量的数据“淹没”而出现溢出。
（4）提供拥塞控制。当网络出现拥塞的时候，TCP能够减小向网络注入数据的速率和数量，缓解拥塞。
（5）提供全双工通信。TCP提供双向的数据传输服务。TCP允许通信双方的应用进程在任何时候发送数据。TCP连接的两端都设有发送缓存和接收缓存，用来临时存放双向通信的数据。
（6）TCP是面向字节流的。TCP中的“流”是指流入到进程或从进程流出的字节序列。

## UDP协议的特点
（1）无连接的。
（2）UDP是一种尽力而为的服务方式，不提供可靠的数据传输服务（比如数据的丢失、重复和无序）。
（3）UDP是高效的传输协议。
（4）UDP没有拥塞控制和流量控制。


物理层（集线器中继器（Repeater，也叫放大器），集线器）、数据链路层（交换机网桥，交换机）、网络层（路由器，ip）、运输层(会话层、表示层)、应用层。
TCP/IP五层模型的协议
应用层
传输层：四层交换机、也有工作在四层的路由器
网络层：路由器、三层交换机
数据链路层：网桥（现已很少使用）、以太网交换机（二层交换机）、网卡（其实网卡是一半工作在物理层、一半工作在数据链路层）

物理层：中继器、集线器、还有我们通常说的双绞线也工作在物理层

网络层：IP协议、ICMP协议、ARP协议、RARP协议。

传输层：UDP协议、TCP协议。

应用层：FTP（文件传送协议）、Telenet（远程登录协议）、DNS（域名解析协议）（UDP,其他都是TCP）、SMTP（邮件传送协议），POP3协议（邮局协议），HTTP协议。SNMP也是udp，DHCP也是udp

# 子网掩码
子网掩码和网络号相与得到的是本网络的网络号，剩下的部分确定主机号。所以分配主机个数的时候，比原来的多出来的1的个数就决定主机个数
子网掩码只有一个作用，就是将某个IP地址划分成网络地址和主机地址两部分。用于子网掩码的位数决定于可能的子网数目和每个子网的主机数目

# HTTP协议的主要特点
1. 支持客户/服务器模式。
2. 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST，PUT,DELETE,OPTION。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。
3. 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。
4. 无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。
5. 无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。

# HTTP中，POST与GET的区别
(1)Get是从服务器上获取数据，Post是向服务器传送数据。
(2)Get是把参数数据队列加到提交表单的Action属性所指向的URL中，值和表单内各个字段一一对应，在URL中可以看到。
(3)Get传送的数据量小，不能大于2KB；post传送的数据量较大，一般被默认为不受限制。

# 浏览器请求过程
1. client浏览器通过DNS解析到www.baidu.com的IP地址220.181.27.48，通过这个IP地址找到client到server的路径。client浏览器发起一个HTTP会话到220.161.27.48，然后通过TCP进行封装数据包，输入到网络层。
2. 在client的传输层，把HTTP会话请求分成报文段，添加源和目的端口，如server使用80端口监听client的请求，客户端由系统随机选择一个端口如5000，与server进行交换，server把相应的请求返回给client的5000端口。然后使用IP层的IP地址查找目的端。
3. client的网络层不用关系应用层或者传输层的东西，主要做的是通过查找路由表确定如何到达server，期间可能经过多个路由器，这些都是由路由器来完成的工作，我不作过多的描述，无非就是通过查找路由表决定通过那个路径到达server。
4. client的链路层，包通过链路层发送到路由器，通过邻居协议查找给定IP地址的MAC地址，然后发送ARP请求查找目的地址，如果得到回应后就可以使用ARP的请求应答交换的IP数据包现在就可以传输了，然后发送IP数据包到达server的地址。

1，这一步会依次查找浏览器缓存，系统缓存，路由器缓存，ISPNDS缓存，根域名服务器


# TCP：三次握手和四次挥手
最初都是closed状态，B先进入监听listen
三次握手过程，为什么需要三次而不是两次？
1，A向B发出连接请求报文，这时SYN=1,seq=x,消耗一个序列号，a进入SYN-SEND,同步已发送状态
2，如果B同意建立连接，则发送确认报文，SYN=1,ACK=1,seq=y,ack=x+1,b进入同步接收（syn-rcvd） 状态
3，A收到B的确认后，还要给B进行确认，确认ACK=1，ack=y+1,seq=x+1,连接建立,a，b进入established

为什么需要三次不是两次？假如是两次，防止已经失效的报文再次到B,有这样一种情况，A向B发送链接请求，但是中途因网络原因滞留，这时A发送请求和B建立连接，确认，数据传输完成，但是这时第一条到了，B请求建立连接，但这时是不需要的。假如三次的话，A没有发出确认，B就认为这时不需要的。



# 四次挥手过程
1，A向B发出链接释放报文，FIN=1，seq=u，a进入FIN-Wait（终止等待状态）
2，B收到连接释放报文后发出确认，确认号ACK=1，ack=u+1,seq=v，b进入CLosed-Wait关闭等待状态，此时a-b链接释放，半关闭，a进入FIN-wait2
3，B向A发出连接释放报文FIN=1，ACK=1，seq=w，ack=u+1,b进入last-ack
4，A收到连接释放报文后，发出确认，ACK=1，ack=w+1，seq=u+1,a进入time-wait状态，等待2MSLa进入clostd
